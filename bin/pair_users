#!/usr/bin/env zsh

set -eo pipefail

# HELP: shows list of users in the pair users authoized_keys file

if [[ -z "$NO_TERM_LIMITS_REMOTE_PAIR_USERNAME" ]]; then
  export NO_TERM_LIMITS_REMOTE_PAIR_USERNAME=pair
fi

if is_mac; then
  user_dir="/Users/$NO_TERM_LIMITS_REMOTE_PAIR_USERNAME"
else
  user_dir="/home/${NO_TERM_LIMITS_REMOTE_PAIR_USERNAME}"
fi

if [[ -f "${user_dir}/.ssh/authorized_keys" ]]; then
  sudo perl -p -e 's/.* [^ ]{40,} //' "${user_dir}/.ssh/authorized_keys"
fi
