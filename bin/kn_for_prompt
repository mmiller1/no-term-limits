#!/usr/bin/env bash

set -eo pipefail

# HELP:

called_from="$1"
if [[ -n "$TMUX" ]] && [[ "$called_from" == "p10k" ]]; then
  exit
fi

set +e
kns=$(kn)
exitstatus=$?
set -e

if [[ "$exitstatus" == "0" ]]; then
  kns_line=$(perl -p -e 's~.*//(.*?)\..*> (.*)~\1:\2~' <<<"$kns")
  echo "(${kns_line}) "
else
  echo ""
fi
